{"version":3,"sources":["./src/app/pages/session-assignment-view/session-assignment-view.page.html","./src/app/pages/session-assignment-view/session-assignment-view-routing.module.ts","./src/app/pages/session-assignment-view/session-assignment-view.module.ts","./src/app/pages/session-assignment-view/session-assignment-view.page.scss","./src/app/pages/session-assignment-view/session-assignment-view.page.ts","./src/assets/js/ui/ui__input__camera.js","./src/assets/js/utils/utils__camera.js","./src/assets/js/utils/utils__checks.js","./src/assets/js/utils/utils__errors.js","./src/assets/js/utils/utils__logging.js","./src/assets/js/utils/utils__resize.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,yPAA0L,sBAAsB,2IAA2I,oBAAoB,2ZAA2Z,kTAAkT,+BAA+B,GAAG,4BAA4B,KAAK,uBAAuB,0EAA0E,UAAU,iRAAiR,+BAA+B,GAAG,4BAA4B,KAAK,uBAAuB,sEAAsE,UAAU,sOAAsO,8UAA8U,YAAY,aAAa,yMAAyM,gJAAgJ,YAAY,4KAA4K,YAAY,+LAA+L,YAAY,kIAAkI,YAAY,aAAa,oBAAoB,uBAAuB,0HAA0H,kNAAkN,KAAK,sCAAsC,yDAAyD,0OAA0O,oEAAoE,+BAA+B,IAAI,4BAA4B,2EAA2E,oEAAoE,qBAAqB,uXAAuX,YAAY,WAAW,0BAA0B,WAAW,gFAAgF,E;;;;;;;;;;;;;;;;;;;ACA1kJ;AACc;AAEoB;AAE3E,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uFAAyB;KACrC;CACF,CAAC;AAMF,IAAa,sCAAsC,GAAnD,MAAa,sCAAsC;CAAG;AAAzC,sCAAsC;IAJlD,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,sCAAsC,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBV;AACM;AACF;AAEA;AAEqD;AACvB;AAClB;AACU;AAanE,IAAa,+BAA+B,GAA5C,MAAa,+BAA+B;CAAG;AAAlC,+BAA+B;IAX3C,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,8GAAsC;YACtC,gFAAyB;YACzB,mEAAgB;SACjB;QACD,YAAY,EAAE,CAAC,uFAAyB,CAAC;KAC1C,CAAC;GACW,+BAA+B,CAAG;AAAH;;;;;;;;;;;;;ACtB5C;AAAe,yEAAU,uBAAuB,GAAG,wBAAwB,uBAAuB,uBAAuB,wBAAwB,GAAG,8BAA8B,0BAA0B,GAAG,cAAc,iBAAiB,iBAAiB,GAAG,6CAA6C,22CAA22C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhmD;AACF;AACgB;AACb;AACkD;AACpE;AACqB;AACD;AACJ;AACI;AACsE;AACrE;AAEhB;AAG0B;AAMxE,IAAa,yBAAyB,GAAtC,MAAa,yBAAyB;IASpC,YAAoB,MAAa,EAAS,UAAe,EAAS,aAA4B,EAAS,QAAiB,EAAS,aAA2B,EAAS,GAAgB,EAAS,MAAa,EAAS,cAA8B,EAAS,eAA+B,EAAU,kBAAsC,EAAS,OAAe,EAAS,cAA6B;QAApX,WAAM,GAAN,MAAM,CAAO;QAAS,eAAU,GAAV,UAAU,CAAK;QAAS,kBAAa,GAAb,aAAa,CAAe;QAAS,aAAQ,GAAR,QAAQ,CAAS;QAAS,kBAAa,GAAb,aAAa,CAAc;QAAS,QAAG,GAAH,GAAG,CAAa;QAAS,WAAM,GAAN,MAAM,CAAO;QAAS,mBAAc,GAAd,cAAc,CAAgB;QAAS,oBAAe,GAAf,eAAe,CAAgB;QAAU,uBAAkB,GAAlB,kBAAkB,CAAoB;QAAS,YAAO,GAAP,OAAO,CAAQ;QAAS,mBAAc,GAAd,cAAc,CAAe;QAHxY,iBAAY,GAAY,KAAK,CAAC;QAK9B,SAAS;QACT,iBAAY,GAAG,YAAY,CAAC;IAHgX,CAAC;IAO7Y,QAAQ;QACN,SAAS;QACT,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAC,WAAW,CAAC;QAC5C,IAAI,CAAC,kBAAkB,GAAC,eAAe,CAAC;IACxC,CAAC;IAED,gBAAgB;QAEd,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE;QAChD,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,aAAa,CAAC,oBAAoB,EAAE;QACxD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,mBAAmB,GAAC,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,EAAE;QAEvE,6BAA6B;QAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IACD,eAAe;QAEb,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,EAAE,EAAE,GAAG,EAAE;YACtD,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,iCAAiC,GAAC,IAAI,CAAC,SAAS,CAAC;QAC7E,CAAC,CAAC,CAAC;IACL,CAAC;IACD,gBAAgB;QACd,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAEH,sBAAsB;IAItB,iBAAiB;QACf,IAAI,CAAC,kBAAkB,GAAG,+DAAa,CAAC,oBAAoB,CAAC;QAC5D,0CAA0C;QAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC9C,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YAC5B,IAAI,CAAC,SAAS,GAAC,EAAE,CAAC;QACpB,CAAC,CAAC;QACH,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC9C,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC;YACtC,IAAI,CAAC,OAAO,GAAC,OAAO,CAAC;QACvB,CAAC,CAAC;QAEF,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,kBAAkB,CAAC,wBAAwB,EAAE,CAAC;QACtE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YAC/C,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;gBACtB,IAAG,IAAI,CAAC,OAAO,IAAE,KAAK,CAAC,QAAQ,EAC/B;oBACE,IAAI,CAAC,SAAS,GAAC,KAAK,CAAC;oBACrB,IAAI,CAAC,eAAe,GAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC;oBACnD,IAAI,CAAC,gBAAgB,GAAC,IAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC;iBAE5D;YACH,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IAEL,CAAC;IAIK,UAAU,CAAC,KAAK;;YAEpB,IAAI,CAAC,kBAAkB,GAAG,+DAAa,CAAC,oBAAoB,CAAC;YAG7D,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE;YAChD,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,aAAa,CAAC,oBAAoB,EAAE;YACxD,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,kBAAkB,CAAC,wBAAwB,EAAE,CAAC;YAEtE,IAAI,MAAM,GAAI,EAAC,QAAQ,EAAE,kBAAkB,EAAC,cAAc,EAAE,kBAAkB,EAAE;YAChF,IAAI,SAAS,GAAG,EAAC,sBAAsB,EAAC,IAAI,CAAC,KAAK,EAAE,YAAY,EAAC,IAAI,CAAC,SAAS,EAAE,SAAS,EAAE,GAAG,EAAC;YAChG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;YAC1C,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,wDAAM,CAAC,MAAM,GAAC,oBAAoB,EAAE,SAAS,EAAC,MAAM,CAAC,CAAC,IAAI,CAAE,QAAQ,CAAC,EAAE;gBAC3F,IAAI;oBACF,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,2DAA0D;oBACpG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;wBACjE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;4BAEpD,sEAAsE;4BACtE,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;gCAElB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC;gCAC9B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;oCAEzB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC;oCAC/B,IAAG,IAAI,CAAC,OAAO,IAAE,IAAI,CAAC,KAAK,EAC3B;wCACE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,qBAAqB,CAAC;wCACzC,IAAI,CAAC,KAAK,GAAG,MAAM;wCACnB,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;wCAEzD,IAAI,CAAC,eAAe,GAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;wCACxD,IAAI,CAAC,gBAAgB,GAAC,IAAI,CAAC,IAAI,CAAC;qCACjC;gCACH,CAAC,CAAC,CAAC;4BACL,CAAC,CAAC;wBACJ,CAAC,CAAC;wBACJ,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;oBACxB,CAAC,CAAC;iBACJ;gBACD,OAAM,CAAC,EAAE;oBACR,OAAO,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;oBACpC,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE;oBACtC,UAAU,CAAC,GAAG,EAAE;wBACf,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE;wBACvB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;oBAEzC,CAAC,EAAE,IAAI,CAAC,CAAC;iBACT;YAED,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;gBAClB,aAAa;gBACb,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;gBAC1C,2BAA2B;gBAC3B,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;gBACtC,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE;gBACtC,UAAU,CAAC,GAAG,EAAE;oBACf,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE;oBACvB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;gBAEzC,CAAC,EAAE,IAAI,CAAC,CAAC;YACR,CAAC,CAAC,CAAC;QAEL,CAAC;KAAA;IAEC,gBAAgB;IAChB,4BAA4B;IAC5B,gCAAgC;IAChC,OAAO;IACP,IAAI;IAGJ,YAAY;IACb,cAAc,CAAC,KAAK;QAClB,IAAG,IAAI,CAAC,YAAY,IAAE,YAAY,EAClC;YACA,IAAI,CAAC,kBAAkB,GAAC,iBAAiB,CAAC;YAC1C,IAAI,CAAC,oBAAoB,GAAC,eAAe,CAAC;YAC1C,IAAI,CAAC,QAAQ,EAAE,CAAC;SACf;aACI,IAAI,IAAI,CAAC,YAAY,IAAE,YAAY,EAAC;YACvC,IAAI,CAAC,kBAAkB,GAAC,eAAe,CAAC;YACxC,IAAI,CAAC,oBAAoB,GAAC,iBAAiB,CAAC;YAC7C,IAAI,CAAC,OAAO,EAAE,CAAC;SACf;IACH,CAAC;IACF,eAAe;IACT,YAAY,CAAC,EAAO;;YACxB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAChD,SAAS,EAAE,qHAAyB;gBACpC,QAAQ,EAAE,aAAa;gBACvB,eAAe,EAAE,IAAI;aACtB,CAAC,CAAC;YACH,OAAO,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;QACjC,CAAC;KAAA;IACD,gBAAgB;IAChB,WAAW;QACT,IAAG,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,KAAK,EACtC;YACE,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;SACzC;aACG;YACF,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,QAAQ,EAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACtE,IAAI,GAAG,KAAK,SAAS,EAAE;oBACrB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,6CAA6C,GAAC,IAAI,CAAC,SAAS,GAAC,GAAG,GAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACzG,cAAc;iBACf;YACF,CAAC,CAAC,CAAC;SACL;IACD,CAAC;IACA,aAAa;IAChB,UAAU,CAAC,OAAO;QAEhB,IAAG,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,KAAK,EACtC;YACE,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;SACzC;aACG;YACF,IAAI,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;SAC1B;IACH,CAAC;IACC,YAAY;QACV,IAAG,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,KAAK,EACtC;YACE,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;SACzC;aACG;YACJ,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,kCAAkC,GAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC5E;IACH,CAAC;IACD,gBAAgB;IAChB,OAAO,CAAC,IAAW;QAEjB,OAAO,IAAI,CAAC,GAAG,CAAC,8BAA8B,CAAC,yBAAyB,GAAC,IAAI,CAAC;IAChF,CAAC;IACD,gBAAgB;IACV,iBAAiB,CAAC,eAAe;;YACrC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,SAAS,EAAE,+IAA8B;gBACzC,cAAc,EAAE;oBACd,YAAY,EAAE,IAAI,CAAC,eAAe;oBAClC,sBAAsB,EAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB;iBACxD;aACF,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IACK,wBAAwB,CAAC,eAAe;;YAC5C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,SAAS,EAAE,+IAA8B;gBACzC,cAAc,EAAE;oBACd,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;iBAC5C;aACF,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IACD,6CAA6C;IAC7C,OAAO;QACL,SAAS;QACT,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;IAC9B,CAAC;IACD,yBAAyB;IACzB,QAAQ;QACN,qFAAW,EAAE,CAAC;QACd,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;IAC9B,CAAC;CAEF;;YAzO4B,oDAAM;YAAoB,4DAAI;YAAwB,uEAAa;YAAkB,uDAAQ;YAAuB,0EAAa;YAAa,sEAAY;YAAgB,sDAAM;YAAyB,8DAAc;YAAyB,8DAAe;YAA8B,gFAAkB;YAAiB,sDAAO;YAAwB,wEAAc;;AAT7X,yBAAyB;IALrC,+DAAS,CAAC;QACT,QAAQ,EAAE,6BAA6B;QACvC,6QAAkD;;KAEnD,CAAC;GACW,yBAAyB,CAkPrC;AAlPqC;;;;;;;;;;;;;ACtBtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiE;;AAED;AACA;AACA;;AAEA;;AAEA;;AAEhE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,mCAAmC;;AAEnC,kCAAkC,gEAAS;AAC3C;;AAEO;;AAEP,EAAE,mEAAG;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEO;;AAEP,EAAE,mEAAG;;AAEL;AACA;AACA;;AAEO;;AAEP,EAAE,mEAAG;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE,uEAAQ;AACV,EAAE,uEAAQ;AACV,EAAE,uEAAQ;AACV;;AAEO;;AAEP,EAAE,mEAAG;;AAEL,iCAAiC,mEAAY;;AAE7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,wBAAwB;AACxB;AACA,0CAA0C,EAAE;;AAE5C,IAAI,0EAAW,gDAAgD,QAAQ;;AAEvE,eAAe,qDAAqD;;AAEpE,KAAK;;AAEL,cAAc,QAAQ,6DAAM,wBAAwB;AACpD,KAAK;AACL,GAAG;AACH;;AAEO;;AAEP,EAAE,mEAAG;;AAEL,EAAE,yEAAU;AACZ;AACA;;AAEO;;AAEP,UAAU;AACV;;AAEO,6BAA6B;;AAEpC;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACjJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsD;AACD;;AAE9C;;AAEP;AACA;AACA;AACA;AACA;;AAEO,wBAAwB;;AAE/B;;AAEA,6BAA6B,kCAAkC;AAC/D,6BAA6B,kCAAkC;AAC/D,6BAA6B,gCAAgC;AAC7D,6BAA6B;AAC7B;;AAEA;;AAEA;;AAEA;;AAEA,gDAAgD,2BAA2B;AAC3E;;AAEA;AACA,iCAAiC,UAAU,eAAe,GAAG,gBAAgB,YAAY;;AAEzF,OAAO,gBAAgB,YAAY;;AAEnC,GAAG;AACH;;AAEO;;AAEP,MAAM,gEAAO;;AAEb;AACA;;AAEA;;AAEA,mCAAmC;;AAEnC,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;;AAEnC,EAAE,6DAAG;;AAEL;AACA;;AAEO;;AAEP;;AAEA,IAAI,6DAAG;AACP;;AAEA,MAAM,gEAAO;;AAEb;AACA;;AAEA;;AAEA;;AAEA,gDAAgD,eAAe;;AAE/D,GAAG;;AAEH,IAAI,8DAAI;AACR;;AAEA;;AAEA;AACA;AACA;;AAEO;;AAEP,EAAE,6DAAG;;AAEL,MAAM,gEAAO;;AAEb;AACA;;AAEA;;AAEA,EAAE,6DAAG;;AAEL,6BAA6B,sBAAsB;AACnD;;AAEe,gEAAC,kDAAkD;;;;;;;;;;;;;ACxGlE;AAAA;AAAA;AAAA;AAAA;AAA4C;;AAErC;;AAEP;;AAEA,IAAI,+DAAK;;AAET;AACA;;AAEA;AACA;;AAEO;;AAEP;;AAEA,IAAI,+DAAK;;AAET;AACA;;AAEA;AACA;;AAEO;;AAEP;;AAEA,IAAI,+DAAK;;AAET;AACA;;AAEA;AACA;;AAEe,gEAAC,6BAA6B;;;;;;;;;;;;;ACtC7C;AAAA;AAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEe,gEAAC,SAAS;;;;;;;;;;;;;ACRzB;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEO,qCAAqC;AACrC,qCAAqC,aAAa,gCAAgC;AAClF,qCAAqC,aAAa,iCAAiC;AACnF,qCAAqC;;AAE7B,gEAAC,gCAAgC;;;;;;;;;;;;;ACPhD;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,GAAG;;AAEH;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;;AAEO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,GAAG;;AAEH;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,gEAAC,gCAAgC","file":"pages-session-assignment-view-session-assignment-view-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <app-session-header></app-session-header>\\r\\n  <ion-segment [(ngModel)]=\\\"segmentModel\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\r\\n    <ion-segment-button  class=\\\"{{isactivevideoorvoice}}\\\" value=\\\"conferencing\\\" >\\r\\n      <ion-label>Conferencing</ion-label>\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button class=\\\"{{isactiveassignment}}\\\" value=\\\"assignment\\\">\\r\\n      <ion-label>Assignment</ion-label>\\r\\n    </ion-segment-button>\\r\\n  </ion-segment>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-refresher slot='fixed' (ionRefresh)='UpdateData($event)'>\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n  <div *ngIf=\\\"segmentModel === 'conferencing'\\\">\\r\\n    <ion-col>\\r\\n    <div style=\\\"text-align: center;\\\">No Conference Call</div>\\r\\n    </ion-col>\\r\\n  </div>    \\r\\n    <div *ngIf=\\\"segmentModel === 'assignment'\\\">\\r\\n      <div class=\\\"thirdcontent\\\" >\\r\\n        \\r\\n        <div class=\\\"box\\\" *ngIf=\\\"asgmtlist&&this.sessionstatus!==this.sessionstatusended\\\">\\r\\n          <ion-label>\\r\\n            [{{asgmtlist.created_By_Username}}-{{asgmtlist.created_By_Level}}]  {{asgmtlist.asgmt_Title}} \\r\\n        </ion-label>\\r\\n        <ion-icon style=\\\"position: absolute;right:1em;zoom:1.3\\\" button src=\\\"assets/images/1001-cross.svg\\\" (click)=\\\"PreviousPage()\\\" ></ion-icon>\\r\\n        <br/>\\r\\n      </div>\\r\\n      <div class=\\\"boxSessionEnd\\\" *ngIf=\\\"asgmtlist&&this.sessionstatus===this.sessionstatusended\\\"> \\r\\n        <ion-label>\\r\\n          [{{asgmtlist.created_By_Username}}-{{asgmtlist.created_By_Level}}]  {{asgmtlist.asgmt_Title}} \\r\\n      </ion-label>\\r\\n      <ion-icon style=\\\"position: absolute;right:1em;zoom:1.3\\\" button src=\\\"assets/images/1001-cross.svg\\\" (click)=\\\"PreviousPage()\\\" ></ion-icon>\\r\\n      <br/>\\r\\n    </div>\\r\\n\\r\\n      <div class=\\\"center\\\">\\r\\n\\r\\n        <ion-card >\\r\\n          <b style=\\\"font-size: x-large;color:black\\\">Boredom, Frustration</b>\\r\\n          <ion-item>\\r\\n            <div id=\\\"__brfv5\\\" class=\\\"__brfv5\\\" hidden></div>\\r\\n            <ion-label id=\\\"emotion-evaluation\\\">\\r\\n              Test\\r\\n            </ion-label>\\r\\n          </ion-item>\\r\\n            <ion-card-content id=\\\"api-result\\\" style=\\\"font-size: large;color:black;padding: 0em;\\\">\\r\\n           Awaiting input for facial tracking...\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n\\r\\n        <ion-card *ngIf=\\\"asgmtlist\\\">\\r\\n          <b style=\\\"font-size: x-large;color:black\\\">Question</b>\\r\\n          <ion-item>\\r\\n            <ion-img *ngIf=\\\"asgmtlist.asgmt_Data==null\\\" ionImgViewer style=\\\"width:10em;height:10em;\\\"  src=\\\"assets/images/noimage.png\\\"></ion-img>\\r\\n            <img (click)=\\\"presentModalImage(imgdisplayinapp)\\\" *ngIf=\\\"asgmtlist.asgmt_Data!=null\\\" style=\\\"width:10em;height:10em;\\\"  [src]=\\\"imgdisplayinapp\\\">\\r\\n            <ion-button *ngIf=\\\"asgmtlist.created_By===this.studentid&&this.sessionstatus!==this.sessionstatusended\\\" slot=\\\"end\\\" style=\\\"font-size: larger;color:white;\\\" (click)=\\\"EditDrawing()\\\">Edit</ion-button>\\r\\n          </ion-item>\\r\\n            <ion-card-content style=\\\"font-size: large;color:black;padding: 0em;\\\">\\r\\n           {{asgmtlist.asgmt_Value}}\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n        <ion-card>\\r\\n          <b style=\\\"font-size: x-large;color:black\\\">Discussion</b>\\r\\n        <div class=\\\"scrolling-wrapper\\\">\\r\\n          <div *ngFor=\\\"let asgmtlist of asgmtdiscusslist\\\"  class=\\\"card\\\"><h2>\\r\\n            <ion-label style=\\\"font-size: medium;\\\">{{asgmtlist.created_On | date:'medium'}}</ion-label><br/>\\r\\n            <img style=\\\"width:10em;height:10em\\\" (click)=\\\"presentModalDiscussImage(asgmtlist.asgmtDiscuss_Data)\\\" *ngIf=\\\"asgmtlist.asgmtDiscuss_Data!=null\\\" [src]=\\\"this.display(asgmtlist.asgmtDiscuss_Data)\\\"><br/>\\r\\n            <ion-label style=\\\"font-size: medium;\\\" *ngIf=\\\"asgmtlist.created_By_Username!=null\\\">Commented By: <b>{{asgmtlist.created_By_Username}} ({{asgmtlist.created_By_Level}})</b></ion-label><br/>\\r\\n            <ion-label style=\\\"font-size: medium;\\\" *ngIf=\\\"asgmtlist.created_By_Username==null\\\">Commented By: <b>{{tutornamefordisplay}}</b></ion-label><br/>\\r\\n          </h2>\\r\\n        </div>\\r\\n        </div>\\r\\n        </ion-card>\\r\\n        </div>\\r\\n  </div>\\r\\n  <!-- </div> -->\\r\\n</div>\\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n   <ion-fab-button *ngIf=\\\"segmentModel === 'assignment'&&asgmtlist\\\" (click)=\\\"StayonPage(asgmtlist.asgmt_Id)\\\"  vertical=\\\"end\\\" horizontal=\\\"end\\\" style=\\\"position: absolute;bottom: 1em;right: 1em;\\\"><img style=\\\"width:3em;height:3em;\\\" src=\\\"assets/images/chat-1.svg\\\"></ion-fab-button> \\r\\n</ion-footer>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SessionAssignmentViewPage } from './session-assignment-view.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SessionAssignmentViewPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SessionAssignmentViewPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SessionAssignmentViewPageRoutingModule } from './session-assignment-view-routing.module';\r\nimport { SessionAssignmentViewPage } from './session-assignment-view.page';\r\nimport {ComponentsModule} from '../../components.module';\r\nimport { NgxIonicImageViewerModule } from 'ngx-ionic-image-viewer';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SessionAssignmentViewPageRoutingModule,\r\n    NgxIonicImageViewerModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [SessionAssignmentViewPage]\r\n})\r\nexport class SessionAssignmentViewPageModule {}\r\n","export default \".center {\\n  text-align: center;\\n}\\n\\n.scrolling-wrapper {\\n  overflow-x: scroll;\\n  overflow-y: hidden;\\n  white-space: nowrap;\\n}\\n\\n.scrolling-wrapper .card {\\n  display: inline-block;\\n}\\n\\nion-item {\\n  border: none;\\n  padding: 0em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1hc3NpZ25tZW50LXZpZXcvQzpcXFVzZXJzXFxMMzA5MDNcXERvY3VtZW50c1xcR2l0SHViXFxJb25pY0ZQL3NyY1xcYXBwXFxwYWdlc1xcc2Vzc2lvbi1hc3NpZ25tZW50LXZpZXdcXHNlc3Npb24tYXNzaWdubWVudC12aWV3LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1hc3NpZ25tZW50LXZpZXcvc2Vzc2lvbi1hc3NpZ25tZW50LXZpZXcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7QUNDSjs7QURDRTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtBQ0VKOztBREFJO0VBQ0UscUJBQUE7QUNFTjs7QURDRTtFQUNFLFlBQUE7RUFDQSxZQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zZXNzaW9uLWFzc2lnbm1lbnQtdmlldy9zZXNzaW9uLWFzc2lnbm1lbnQtdmlldy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2VudGVye1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIH1cclxuICAuc2Nyb2xsaW5nLXdyYXBwZXIge1xyXG4gICAgb3ZlcmZsb3cteDogc2Nyb2xsO1xyXG4gICAgb3ZlcmZsb3cteTogaGlkZGVuO1xyXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICBcclxuICAgIC5jYXJkIHtcclxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgfVxyXG4gIH1cclxuICBpb24taXRlbSB7XHJcbiAgICBib3JkZXI6bm9uZTtcclxuICAgIHBhZGRpbmc6IDBlbTtcclxuICB9IiwiLmNlbnRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnNjcm9sbGluZy13cmFwcGVyIHtcbiAgb3ZlcmZsb3cteDogc2Nyb2xsO1xuICBvdmVyZmxvdy15OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG4uc2Nyb2xsaW5nLXdyYXBwZXIgLmNhcmQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5cbmlvbi1pdGVtIHtcbiAgYm9yZGVyOiBub25lO1xuICBwYWRkaW5nOiAwZW07XG59Il19 */\";","import { Component, OnInit, NgZone } from '@angular/core';\r\nimport { ActivatedRoute,Router } from '@angular/router';\r\nimport { AssignmentsService } from '../../services/assignments.service';\r\nimport { ModalController, Platform } from '@ionic/angular';\r\nimport { SessionAssignmentChatPage } from '../../pages/session-assignment-chat/session-assignment-chat.page';\r\nimport { Storage } from '@ionic/storage';\r\nimport {NetworkService} from '../../services/network.service';\r\nimport {apiurl, SessionStatus} from '../../model/global-api';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GlobalService} from '../../services/global.service';\r\nimport { SessionViewImageDiscussionPage } from '../shared-module/session-view-image-discussion/session-view-image-discussion.page';\r\nimport { SessionMyPage } from '../session-my/session-my.page';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { HTTP } from '@ionic-native/http/ngx';\r\nimport { TestBed } from '@angular/core/testing';\r\nimport { run } from \"../../../assets/js/examples/face_tracking__track_one_face.js\";\r\nimport { closeCamera } from '../../../assets/js/ui/ui__input__camera.js'\r\n@Component({\r\n  selector: 'app-session-assignment-view',\r\n  templateUrl: './session-assignment-view.page.html',\r\n  styleUrls: ['./session-assignment-view.page.scss'],\r\n})\r\nexport class SessionAssignmentViewPage implements OnInit {\r\n  textdisplay: any;\r\n  assignlist: any;\r\n  ChangeDetectorRef: any;\r\n  test: any;\r\n  test2: any;\r\n  refreshvalue: boolean = false;\r\n  test3: any;\r\n\r\n  constructor(private ngZone:NgZone,private nativeHttp:HTTP,private globalService: GlobalService,private platform:Platform,private sessionmypage:SessionMyPage ,public dms:DomSanitizer,private router:Router,private activatedRoute: ActivatedRoute,private modalController:ModalController, private assignmentsService: AssignmentsService,private storage:Storage,private networkService:NetworkService) { }\r\n\r\n  //Segment\r\n  segmentModel = \"assignment\";isactiveassignment:string; isactivevideoorvoice:string;asgmtid:any;sessionid:any;\r\n //User Info\r\n token:any;studentid:any;tutornamefordisplay:any;\r\n  asgmtlist:any;sessionstatusended:any;sessionstatus:any;imgdisplayinapp:any;asgmtdiscusslist:any;discussimgdisplayinapp:any;\r\n  ngOnInit() { \r\n    //Segment\r\n    console.log('this.router.url','this.rout')\r\n  this.isactiveassignment=\"activesegment\";\r\n  }\r\n\r\n  ionViewWillEnter()\r\n  {\r\n    this.token=this.globalService.getselectedtoken()\r\n    this.studentid=this.globalService.getselectedStudentId()\r\n    this.getAssignmentList();\r\n    this.tutornamefordisplay=this.assignmentsService.getselectedtutorname()\r\n\r\n    // Starts brfv5 face tracking\r\n    this.brf_run();\r\n  }\r\n  ionViewDidEnter(){\r\n\r\n    this.platform.backButton.subscribeWithPriority(10, () => {\r\n      this.router.navigateByUrl('tabs/session-view/session-view/'+this.sessionid)\r\n    });\r\n  }\r\n  ionViewWillLeave() {\r\n    this.brf_stop();\r\n  }\r\n\r\n/*Get AssignmentList*/\r\n\r\n\r\n\r\ngetAssignmentList(){\r\n  this.sessionstatusended = SessionStatus.SESSION_STATUS_ENDED;\r\n   // Get the ID that was passed with the URL\r\n   this.activatedRoute.paramMap.subscribe(params => {\r\n     let id = params.getAll('id')\r\n     this.sessionid=id;\r\n   })\r\n  this.activatedRoute.paramMap.subscribe(params => {\r\n    let asgmtid = params.getAll('asgmtid')\r\n    this.asgmtid=asgmtid;\r\n  })\r\n\r\n  this.sessionstatus=this.assignmentsService.getselectedsessionstatus();\r\n  this.storage.get('assignmentdetails').then((val) => {\r\n      val.forEach((valor) => {\r\n      if(this.asgmtid==valor.asgmt_Id)\r\n      {\r\n        this.asgmtlist=valor;\r\n        this.imgdisplayinapp=this.display(valor.asgmt_Data)\r\n        this.asgmtdiscusslist=this.asgmtlist.assignmentDiscussions;\r\n\r\n      }\r\n    })\r\n  });\r\n\r\n}\r\n\r\n\r\n\r\nasync UpdateData(event)\r\n{\r\n  this.sessionstatusended = SessionStatus.SESSION_STATUS_ENDED;\r\n\r\n\r\n  this.token=this.globalService.getselectedtoken()\r\n  this.studentid=this.globalService.getselectedStudentId()\r\n  this.sessionstatus=this.assignmentsService.getselectedsessionstatus();\r\n\r\n  let header =  {'Accept': 'application/json','Content-Type': 'application/json' }\r\n  let fetchinfo = {\"Authentication_Token\":this.token, \"Student_Id\":this.studentid, \"inDepth\": \"Y\"}\r\n  this.nativeHttp.setDataSerializer('json');\r\n  this.nativeHttp.post(apiurl.apiUrl+'session/mySessions', fetchinfo,header).then( response => {\r\n   try {\r\n     response.data = JSON.parse(response.data);//whole asgmtlist of particular session ,returns a promise\r\n     this.storage.set('AssignmentDiscussion',response.data).then(val =>{\r\n      this.storage.get('AssignmentDiscussion').then((val) =>\r\n      {\r\n        // console.log('storage get',this.storage.get('AssignmentDiscussion'))\r\n        val.forEach((valor) => \r\n        {\r\n            this.test = valor.assignments;\r\n            this.test.forEach(valor2 => \r\n          {\r\n              this.test2 = valor2.asgmt_Id;\r\n            if(this.asgmtid==this.test2)\r\n            {\r\n              this.test = valor2.assignmentDiscussions;\r\n              this.test3 = valor2 \r\n              console.log('this is the apilist' , this.test.created_On)\r\n\r\n              this.imgdisplayinapp=this.display(this.test3.asgmt_Data)\r\n              this.asgmtdiscusslist=this.test;\r\n            }\r\n          });\r\n        })\r\n      })\r\n    event.target.complete();    \r\n    })\r\n } \r\n catch(e) {\r\n  console.error('JSON parsing error');\r\n  this.assignmentsService.presentError()\r\n  setTimeout(() => {\r\n   event.target.complete()\r\n   this.router.navigateByUrl('tabs/main');  \r\n\r\n }, 3000); \r\n}\r\n\r\n}).catch(response => {\r\n  // prints 403\r\n  console.log(response.status, ' errorsss');\r\n  // prints Permission denied\r\n  console.log(response.error, ' error');\r\n  this.assignmentsService.presentError()\r\n  setTimeout(() => {\r\n   event.target.complete()\r\n   this.router.navigateByUrl('tabs/main');  \r\n\r\n }, 3000);\r\n  });\r\n\r\n}\r\n\r\n  // refreshing(){\r\n  //   this.ngZone.run(() => {\r\n  //     this.refreshvalue = true;\r\n  //   })\r\n  // }\r\n\r\n\r\n  /*Segment */\r\n segmentChanged(event) {\r\n   if(this.segmentModel!=\"assignment\")\r\n   {\r\n   this.isactiveassignment=\"inactivesegment\";\r\n   this.isactivevideoorvoice=\"activesegment\";\r\n   this.brf_stop();\r\n   }\r\n   else if (this.segmentModel==\"assignment\"){\r\n     this.isactiveassignment=\"activesegment\";\r\n     this.isactivevideoorvoice=\"inactivesegment\";\r\n    this.brf_run();\r\n   }\r\n }\r\n/*Chat Pop up*/\r\nasync presentModal(ev: any) {\r\n  const popover = await this.modalController.create({\r\n    component: SessionAssignmentChatPage,\r\n    cssClass: 'small-modal',\r\n    backdropDismiss: true\r\n  });\r\n  return await popover.present();\r\n}\r\n/*Edit Drawing*/\r\nEditDrawing(){\r\n  if(this.networkService.online == false )\r\n  {\r\n    this.networkService.presentNetworkMsg(); \r\n  }\r\n  else{\r\n    this.assignmentsService.presentDrawing('Cancel','Confirm').then((res) => {\r\n      if (res === 'Confirm') {\r\n        this.router.navigateByUrl('/tabs/session-view/session-assignment-edit/'+this.sessionid+'/'+this.asgmtid);   \r\n        //Drawing Page\r\n      }\r\n     });\r\n  }\r\n  }\r\n   /*Open Chat*/\r\nStayonPage(asgmtid)\r\n{\r\n  if(this.networkService.online == false )\r\n  {\r\n    this.networkService.presentNetworkMsg(); \r\n  }\r\n  else{\r\n    this.assignmentsService.setselectedasgmtid(asgmtid);\r\n    this.presentModal(event);\r\n  }\r\n}\r\n  PreviousPage(){\r\n    if(this.networkService.online == false )\r\n    {\r\n      this.networkService.presentNetworkMsg(); \r\n    }\r\n    else{\r\n    this.router.navigateByUrl('/tabs/session-view/session-view/'+this.sessionid);\r\n    }  \r\n  }\r\n  //Image Sanitize\r\n  display(bImg:string)\r\n  {\r\n    return this.dms.bypassSecurityTrustResourceUrl(\"data:image/png;base64, \"+bImg)\r\n  }\r\n  //Display Image \r\n  async presentModalImage(imgdisplayinapp) {\r\n    const modal = await this.modalController.create({\r\n      component: SessionViewImageDiscussionPage,\r\n      componentProps: { \r\n        imagedisplay: this.imgdisplayinapp,\r\n        discussimgdisplayinapp:this.asgmtlist.asgmtDiscuss_Data\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n  async presentModalDiscussImage(imgdisplayinapp) {\r\n    const modal = await this.modalController.create({\r\n      component: SessionViewImageDiscussionPage,\r\n      componentProps: { \r\n        imagedisplay: this.display(imgdisplayinapp),\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n  //Opens camera and begins brfv5 face tracking\r\n  brf_run() {\r\n    // run();\r\n    console.log(\"brfv5 started\")\r\n  }\r\n  // Stops camera and brfv5\r\n  brf_stop() {\r\n    closeCamera();\r\n    console.log(\"camera closed\")\r\n  }\r\n  \r\n}\r\n","import { log }                  from '../utils/utils__logging.js'\r\n\r\nimport { startCamera }          from '../utils/utils__camera.js'\r\nimport { stopCamera }           from '../utils/utils__camera.js'\r\nimport { _default480p }         from '../utils/utils__camera.js'\r\n\r\nimport { doResize, ScaleMode }  from '../utils/utils__resize.js'\r\n\r\nimport { ERRORS }               from '../utils/utils__errors.js'\r\n\r\nconst __brfv5__input            = document.createElement('video')\r\nconst __brfv5__camera_canvas_0  = document.createElement('canvas')\r\nconst __brfv5__camera_canvas_1  = document.createElement('canvas')\r\n\r\n__brfv5__camera_canvas_0.id     = '__brfv5__camera_canvas_0'\r\n__brfv5__camera_canvas_1.id     = '__brfv5__camera_canvas_1'\r\n\r\n__brfv5__input.setAttribute('playsinline', true)\r\n__brfv5__input.setAttribute('muted', true)\r\n\r\nconst _name                     = 'BRFv5CameraCanvas'\r\n\r\nconst _lastCameraConstraints    = { width: 640, height: 480, frameRate: 30, facingMode: 'user', mirrored: true }\r\n\r\nlet _scaleMode                  = ScaleMode.PROPORTIONAL_OUTSIDE\r\nlet _isFirstOpenCameraCall      = true\r\n\r\nexport const mountCamera = (node, scaleMode) => {\r\n\r\n  log(_name + ': mountCamera')\r\n\r\n  if(node && node.appendChild) {\r\n\r\n    _scaleMode = scaleMode\r\n\r\n    __brfv5__input.className            = 'bg-t abs cm'\r\n    __brfv5__camera_canvas_0.className  = 'bg-t abs vh c'\r\n    __brfv5__camera_canvas_1.className  = 'bg-t abs vh c'\r\n\r\n    node.appendChild(__brfv5__input)\r\n    node.appendChild(__brfv5__camera_canvas_0)\r\n    node.appendChild(__brfv5__camera_canvas_1)\r\n\r\n    window.addEventListener(\"resize\", onResize)\r\n  }\r\n}\r\n\r\nexport const hideCamera = () => {\r\n\r\n  log(_name + ': hideCamera')\r\n\r\n  __brfv5__camera_canvas_0.classList.add('vh')\r\n  __brfv5__camera_canvas_1.classList.add('vh')\r\n}\r\n\r\nexport const setSizeCamera = (width, height) => {\r\n\r\n  log(_name + ': setSizeCamera:', width, height)\r\n\r\n  __brfv5__camera_canvas_0.width  = width\r\n  __brfv5__camera_canvas_0.height = height\r\n  __brfv5__camera_canvas_1.width  = width\r\n  __brfv5__camera_canvas_1.height = height\r\n\r\n  onResize()\r\n}\r\n\r\nconst onResize = () => {\r\n\r\n  const width  = __brfv5__camera_canvas_0.width\r\n  const height = __brfv5__camera_canvas_0.height\r\n\r\n  doResize(__brfv5__input,           width, height, _scaleMode)\r\n  doResize(__brfv5__camera_canvas_0, width, height, _scaleMode)\r\n  doResize(__brfv5__camera_canvas_1, width, height, _scaleMode)\r\n}\r\n\r\nexport const openCamera = (constraints) => {\r\n\r\n  log(_name + ': openCamera:', constraints)\r\n\r\n  if(!constraints) constraints = _default480p\r\n\r\n  let restartStream = _isFirstOpenCameraCall || isVideoPaused()\r\n\r\n  restartStream     = checkConstraintValue('width',      constraints) || restartStream\r\n  restartStream     = checkConstraintValue('height',     constraints) || restartStream\r\n  restartStream     = checkConstraintValue('frameRate',  constraints) || restartStream\r\n  restartStream     = checkConstraintValue('facingMode', constraints) || restartStream\r\n  restartStream     = checkConstraintValue('mirrored',   constraints) || restartStream\r\n\r\n  _isFirstOpenCameraCall = false\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n    if(!restartStream) { resolve({\r\n      width:  __brfv5__input.videoWidth,\r\n      height: __brfv5__input.videoHeight }); return }\r\n\r\n    startCamera(__brfv5__input, _lastCameraConstraints).then(({ video }) => {\r\n\r\n      resolve({ width: video.videoWidth, height: video.videoHeight })\r\n\r\n    }).catch((e) => {\r\n\r\n      reject({ error: ERRORS.CAMERA_FAILED, msg: e })\r\n    })\r\n  })\r\n}\r\n\r\nexport const closeCamera = (pause = true, silent = false) => {\r\n\r\n  log(_name + ': closeCamera:', pause, silent)\r\n\r\n  stopCamera(__brfv5__input, pause, silent)\r\n  hideCamera()\r\n}\r\n\r\nexport const getDataFromCamera = () => {\r\n\r\n  return { input: __brfv5__input, canvas0: __brfv5__camera_canvas_0, canvas1: __brfv5__camera_canvas_1 }\r\n}\r\n\r\nexport const isVideoPaused = () => { return __brfv5__input.paused }\r\n\r\nconst checkConstraintValue = (value, constraints) => {\r\n\r\n  if(constraints[value] && _lastCameraConstraints[value] !== constraints[value]) {\r\n\r\n    _lastCameraConstraints[value] = constraints[value]\r\n\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport default {\r\n  mountCamera,\r\n  hideCamera,\r\n  setSizeCamera,\r\n  openCamera,\r\n  closeCamera,\r\n  getDataFromCamera,\r\n  isVideoPaused\r\n}\r\n","import { log, warn }        from './utils__logging.js'\r\nimport { isVideo }          from './utils__checks.js'\r\n\r\nexport const CameraFacingMode = {\r\n\r\n  USER:                     \"user\",\r\n  ENVIRONMENT:              \"environment\",\r\n  LEFT:                     \"left\",\r\n  RIGHT:                    \"right\"\r\n};\r\n\r\nexport const _default480p   = { width:  640, height:  480, frameRate: 30, facingMode: CameraFacingMode.USER }\r\n\r\nconst _videoConstraints     = {\r\n\r\n  width:                    { ideal: 640, min: 640, max: 1920 },\r\n  height:                   { ideal: 480, min: 480, max: 1080 },\r\n  frameRate:                { ideal:  30,           max: 30 },\r\n  facingMode:               { ideal: CameraFacingMode.USER }\r\n};\r\n\r\nconst logName               = 'utils__camera: '\r\n\r\nconst getUserMedia = (video) => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n    window.navigator.mediaDevices.getUserMedia({ video: _videoConstraints })\r\n      .then((mediaStream) => {\r\n\r\n        video.srcObject = mediaStream\r\n        video.play().then(() => { resolve({ video: video }) }).catch((e) => { reject(e) })\r\n\r\n      }).catch((e) => { reject(e) })\r\n\r\n  }) // catch must be added after then, so then isn't called\r\n}\r\n\r\nexport const startCamera = (video, videoConstraints) => {\r\n\r\n  if(!isVideo(video, logName + 'startCamera: Provide a HTML video element to start the camera stream.' )) {\r\n\r\n    return\r\n  }\r\n\r\n  stopCamera(video, false, true)\r\n\r\n  if(!videoConstraints)           { videoConstraints = _default480p }\r\n\r\n  if(videoConstraints.width)      { _videoConstraints.width.ideal       = videoConstraints.width }\r\n  if(videoConstraints.height)     { _videoConstraints.height.ideal      = videoConstraints.height }\r\n  if(videoConstraints.frameRate)  { _videoConstraints.frameRate.ideal   = videoConstraints.frameRate }\r\n  if(videoConstraints.facingMode) { _videoConstraints.facingMode.ideal  = videoConstraints.facingMode }\r\n\r\n  log(logName + 'startCamera:', _videoConstraints)\r\n\r\n  return getUserMedia(video)\r\n}\r\n\r\nexport const stopCamera = (video, pause = true, silent = false) => {\r\n\r\n  if(!silent) {\r\n\r\n    log(logName + 'stopCamera')\r\n  }\r\n\r\n  if(!isVideo(video, logName + 'stopCamera: Provide a HTML video element to stop the camera stream.' )) {\r\n\r\n    return\r\n  }\r\n\r\n  const mediaStream = video.srcObject\r\n\r\n  if(mediaStream) {\r\n\r\n    mediaStream.getTracks().forEach((track) => { track.stop() })\r\n\r\n  } else if(!silent) {\r\n\r\n    warn(logName + 'stopCamera: No mediaStream attached to video.')\r\n  }\r\n\r\n  if(pause && !video.paused) {\r\n\r\n    video.pause()\r\n  }\r\n}\r\n\r\nexport const toggleCameraFacingMode = (video) => {\r\n\r\n  log(logName + 'toggleCameraFacingMode')\r\n\r\n  if(!isVideo(video, logName + 'toggleCameraFacingMode: Provide a HTML video element to toggle the facing mode.')) {\r\n\r\n    return\r\n  }\r\n\r\n  const newMode = _videoConstraints.facingMode.ideal === CameraFacingMode.USER ? CameraFacingMode.ENVIRONMENT : CameraFacingMode.USER\r\n\r\n  log(logName + 'toggleCameraFacingMode: to ' + newMode)\r\n\r\n  return startCamera(video, { facingMode: newMode })\r\n}\r\n\r\nexport default { startCamera, stopCamera, toggleCameraFacingMode }\r\n","import  { error } from './utils__logging.js'\r\n\r\nexport const isVideo = (video, errorMsg) => {\r\n\r\n  if(!video || !video.play) {\r\n\r\n    error(errorMsg)\r\n\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nexport const isImage = (image, errorMsg) => {\r\n\r\n  if(!image || !image.naturalWidth) {\r\n\r\n    error(errorMsg)\r\n\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nexport const isCanvas = (canvas, errorMsg) => {\r\n\r\n  if (!canvas || !canvas.getContext) {\r\n\r\n    error(errorMsg)\r\n\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nexport default { isVideo, isImage, isCanvas }\r\n","export const ERRORS = {\r\n\r\n  CAMERA_FAILED:                          -10, // Failed to access the camera, either no camera attached or forbidden by user.\r\n  IMAGE_FAILED:                           -11, // Failed to load an image.\r\n  SCENE_CREATION_FAILED:                  -12, // no WebGL support? Device/Browser too old?\r\n  BRFV5_FAILED:                           -13  // no WebAssembly support? Device/Browser too old?\r\n};\r\n\r\nexport default { ERRORS }\r\n","let _debug = true\r\n\r\nexport const setLogLevel  = (showDebug) => { _debug = showDebug }\r\nexport const log          = (...args)   => { if(_debug) { console.log.apply(null, args) } }\r\nexport const warn         = (...args)   => { if(_debug) { console.warn.apply(null, args) } }\r\nexport const error        = (...args)   => { console.error.apply(null, args) }\r\n\r\nexport default { log, warn, error, setLogLevel }\r\n","export const ScaleMode      = {\r\n  NO_SCALE:                 0,\r\n  STRETCH:                  1,\r\n  PROPORTIONAL_INSIDE:      2,\r\n  PROPORTIONAL_OUTSIDE:     3\r\n};\r\n\r\nexport const doResize = (element, elementWidth, elementHeight, scaleMode, scale) => {\r\n\r\n  const ew    = elementWidth\r\n  const eh    = elementHeight\r\n\r\n  const rect  = element.parentElement.getBoundingClientRect()\r\n\r\n  const rx    = parseInt(rect.left)\r\n  const ry    = parseInt(rect.top)\r\n  const rw    = parseInt(rect.right)  - rx\r\n  const rh    = parseInt(rect.bottom) - ry\r\n\r\n  let   sh    = rh;\r\n  let   sw    = sh / eh * ew;\r\n\r\n  if(scaleMode === ScaleMode.NO_SCALE) {\r\n\r\n    sw = ew\r\n    sh = eh\r\n\r\n  } else if(scaleMode === ScaleMode.STRETCH) {\r\n\r\n    sw = rw\r\n\r\n  } else if(scaleMode === ScaleMode.PROPORTIONAL_INSIDE) {\r\n\r\n    if(sw > rw) {\r\n\r\n      sw    = rw\r\n      sh    = sw / ew * eh\r\n    }\r\n\r\n  } else if(scaleMode === ScaleMode.PROPORTIONAL_OUTSIDE) {\r\n\r\n    if(sw < rw) {\r\n\r\n      sw    = rw\r\n      sh    = sw / ew * eh\r\n    }\r\n  }\r\n\r\n  if(scale) {\r\n\r\n    let _scale = 1.0\r\n\r\n    if(Math.abs(rw - sw) < 0.1) {\r\n\r\n      _scale = sh / eh\r\n\r\n    } else {\r\n\r\n      _scale = sw / ew\r\n    }\r\n\r\n    element.style.left  = Math.floor((rw - sw) * 0.5) + 'px'\r\n    element.style.top   = Math.floor((rh - sh) * 0.5) + 'px'\r\n    element.style.transformOrigin = '0 0'\r\n\r\n    if(rw > rh) {\r\n      element.style.transform = 'scale(' + (_scale) + ')'\r\n    } else {\r\n      element.style.transform = 'scale(' + (_scale) + ')'\r\n    }\r\n\r\n  } else {\r\n\r\n    element.style.width  = sw + \"px\"\r\n    element.style.height = sh + \"px\"\r\n  }\r\n}\r\n\r\nexport const getScale = (element, elementWidth, elementHeight, scaleMode) => {\r\n\r\n  const ew    = elementWidth\r\n  const eh    = elementHeight\r\n\r\n  const rect  = element.parentElement.getBoundingClientRect()\r\n\r\n  const rx    = parseInt(rect.left)\r\n  const ry    = parseInt(rect.top)\r\n  const rw    = parseInt(rect.right)  - rx\r\n  const rh    = parseInt(rect.bottom) - ry\r\n\r\n  let   sh    = rh;\r\n  let   sw    = sh / eh * ew;\r\n\r\n  if(scaleMode === ScaleMode.NO_SCALE) {\r\n\r\n    sw = ew\r\n    sh = eh\r\n\r\n  } else if(scaleMode === ScaleMode.STRETCH) {\r\n\r\n    sw = rw\r\n\r\n  } else if(scaleMode === ScaleMode.PROPORTIONAL_INSIDE) {\r\n\r\n    if(sw > rw) {\r\n\r\n      sw    = rw\r\n      sh    = sw / ew * eh\r\n    }\r\n\r\n  } else if(scaleMode === ScaleMode.PROPORTIONAL_OUTSIDE) {\r\n\r\n    if(sw < rw) {\r\n\r\n      sw    = rw\r\n      sh    = sw / ew * eh\r\n    }\r\n  }\r\n\r\n  return sw / rw\r\n}\r\n\r\nexport default { ScaleMode, doResize, getScale }\r\n"],"sourceRoot":"webpack:///"}